\newcommand{\mul}{35}

\newcommand{\coordsize}{2pt}
\newcommand{\coordcolor}{green}
\newcommand{\coords}{
	\pgfmathsetmacro{\ABx}{\lthree * sin(\phidegree) * \mul}
	\pgfmathsetmacro{\BCx}{\ltwo * cos(\betadegree) * \mul}
	\pgfmathsetmacro{\BCy}{-\ltwo * sin(\betadegree) * \mul}

	\coordinate (A) at (0, \lthree * \mul);
	\coordinate (B) at ($(A) + (\phidegree:\lthree * \mul)$);
	\coordinate (C) at (\ABx + \BCx, 0);
	\coordinate (D) at ($(C) + (0, -\lone * \mul)$);
        \coordinate (E) at (0, 0);
	\coordinate (S2) at ($ (B)!0.5!(C) $);

	\coordinate (P2) at ($(C) + (0, \CPtwoy * \mul)$);

	\coordinate (aBend) at ($(B) + (\abx * \amul, \aby * \amul)$);
	\coordinate (aS2end) at ($(S2) + (\astwox * \amul, \astwoy * \amul)$);
}

\newcommand{\convention}{
        \draw[-Stealth] 
                (0, 0) -- +(10, 0)
                node [below] {$x$};
        \draw[-Stealth]
                (0, 0) -- +(0, 2.5)
                node [left] {$y$};

        \draw[-Stealth]
                (0, -1) arc (0:180:-.5)
                node [midway, above] {$+$};
}

\newcommand{\points}{
        \fill[\coordcolor] (A) circle (\coordsize) node[left, color=black] {$A$};
        \fill[\coordcolor] (B) circle (\coordsize) node[above right, color=black] {$B$};
        \fill[\coordcolor] (C) circle (\coordsize) node[below, color=black] {$C$};
        \fill[\coordcolor] (D) circle (\coordsize) node[below, color=black] {$D$};
        \fill[\coordcolor] (E) circle (\coordsize) node[below, color=black] {$E$};
        \fill[\coordcolor] (S2) circle (\coordsize) node[above, color=black] {$S_2$};
}

\newcommand{\beamwidth}{2}
\newcommand{\beamcolor}{black}
\newcommand{\testtwo}{
	\draw[line width=\beamwidth, \beamcolor] (B) -- (C);
}
\newcommand{\beams}{
	\testtwo
}



\newcommand{\wheelcolor}{gray}
\newcommand{\wheelwidth}{1}
\newcommand{\testtr}{
	\fill[\wheelcolor, opacity=.5] (A) circle (\lthree * \mul);
	\draw[line width=\wheelwidth, \beamcolor] (A) circle (\lthree * \mul);
}
\newcommand{\testone}{
	\fill[\wheelcolor, opacity=.5] (C) circle (\lone * \mul);
	\draw[line width=\wheelwidth, \beamcolor] (C) circle (\lone * \mul);
}
\newcommand{\wheels}{
	\testtr
	\testone
}

\newcommand{\forcewidth}{1pt}
\newcommand{\forcecolor}{teal}
\newcommand{\forceunit}{1}

\newcommand{\nyomwidth}{1pt}
\newcommand{\nyomcolor}{purple}

\newcommand{\speedcolor}{purple}
\newcommand{\speedwidth}{1pt}
\newcommand{\smul}{3}

\newcommand{\accelcolor}{orange}
\newcommand{\accelwidth}{1pt}
\newcommand{\amul}{1}

\newcommand{\sztaone}{
	\centering
	\begin{tikzpicture}
		\coords

		\testone
		\fill[\coordcolor] (C) circle (\coordsize) node[left, color=black] {$C$};
		\fill[\coordcolor] (D) circle (\coordsize) node[above, color=black] {$D$};

		\draw[line width=\forcewidth, \forcecolor, -Stealth]
		(C) -- ($(C) + (\forceunit, 0)$)
		node[midway, above] {$C_\text{x}$};
		\draw[line width=\forcewidth, \forcecolor, -Stealth]
		(C) -- ($(C) + (0, \forceunit)$)
		node[midway, left] {$C_\text{y}$};
		\draw[line width=\forcewidth, \forcecolor, -Stealth]
		(C) -- ($(C) + (0, -\forceunit)$)
		node[midway, left] {$G_1$};

		\draw[line width=\forcewidth, \forcecolor, -Stealth]
		(D) -- ($(D) + (\forceunit, 0)$)
		node[midway, below] {$D_\text{x}$};
		\draw[line width=\forcewidth, \forcecolor, -Stealth]
		($(D) + (0, -\forceunit)$) -- (D)
		node[midway, left] {$N_1$};
	\end{tikzpicture}
	\caption{1. test szabadtest-ábrája}
}

\newcommand{\sztatwo}{
	\centering
	\begin{tikzpicture}
		\coords

		\testtwo
		\fill[\coordcolor] (B) circle (\coordsize) node[below left, color=black] {$B$};
		\fill[\coordcolor] (C) circle (\coordsize) node[above right, color=black] {$C$};
		\fill[\coordcolor] (S2) circle (\coordsize) node[below left, color=black] {$S_2$};

		\draw[line width=\accelwidth, \accelcolor, -Stealth]
		(S2) -- ($(S2) + (-\astwox * \amul, 0)$)
		node[above right] {${a_\text{S2}}_\text{x}$};
		\draw[line width=\accelwidth, \accelcolor, -Stealth]
		(S2) -- ($(S2) + (0, -\astwoy * \amul)$)
		node[right] {${a_\text{S2}}_\text{y}$};

		\draw[line width=\forcewidth, \forcecolor, -Stealth]
		(B) -- ($(B) + (\forceunit, 0)$)
		node[right] {$B_\text{x}$};
		\draw[line width=\forcewidth, \forcecolor, -Stealth]
		(B) -- ($(B) + (0, \forceunit)$)
		node[midway, left] {$B_\text{y}$};
		\draw[line width=\forcewidth, \forcecolor, -Stealth]
		(C) -- ($(C) + (-\forceunit, 0)$)
		node[midway, below] {$C_\text{x}$};
		\draw[line width=\forcewidth, \forcecolor, -Stealth]
		(C) -- ($(C) + (0, -\forceunit)$)
		node[midway, right] {$C_\text{y}$};
		\draw[line width=\forcewidth, \forcecolor, -Stealth]
		(S2) -- ($(S2) + (0, -\forceunit)$)
		node[midway, right] {$G_2$};
		\draw[line width=\forcewidth, \forcecolor, -Stealth]
		(S2) -- ($(S2) + (0, \forceunit)$)
		node[midway, left] {$F_y$};

		\draw[line width=\nyomwidth, \nyomcolor, -Stealth]
			(1, 0) arc (0:180:-.5)
			node [midway, above] {$\epsilon_2$};

	\end{tikzpicture}
	\caption{2. test szabadtest-ábrája}
}

\newcommand{\sztatr}{
	\centering
	\begin{tikzpicture}
		\coords

		\testtr
		\fill[\coordcolor] (A) circle (\coordsize) node[left, color=black] {$A$};
		\fill[\coordcolor] (B) circle (\coordsize) node[above right, color=black] {$B$};
		\fill[\coordcolor] (E) circle (\coordsize) node[below right, color=black] {$E$};

		\draw[line width=\accelwidth, \accelcolor, -Stealth]
		(A) -- ($(A) + (\aStrx * \amul * 3, 0)$)
		node[right] {${a_\text{S3}}_\text{x}$};
		\draw[line width=\accelwidth, \accelcolor, -Stealth]
		(A) -- ($(A) + (0, -\aStry * \amul * 3)$)
		node[below left] {${a_\text{S3}}_\text{y}$};


		\draw[line width=\forcewidth, \forcecolor, -Stealth]
		(B) -- ($(B) + (-\forceunit, 0)$)
		node[midway, below] {$B_\text{x}$};
		\draw[line width=\forcewidth, \forcecolor, -Stealth]
		(B) -- ($(B) + (0, -\forceunit)$)
		node[right] {$B_\text{y}$};

		\draw[line width=\forcewidth, \forcecolor, -Stealth]
		(E) -- ($(E) + (\forceunit, 0)$)
		node[right] {$E_\text{x}$};

		\draw[line width=\forcewidth, \forcecolor, -Stealth]
		(A) -- ($(A) + (0, -\forceunit)$)
		node[midway, left] {$G_3$};
		\draw[line width=\forcewidth, \forcecolor, -Stealth]
		($(E) + (0, -\forceunit)$) -- (E)
		node[midway, left] {$N_3$};

		\draw[line width=\nyomwidth, \nyomcolor, -Stealth]
			(-3, 1) arc (0:180:-.5)
			node [midway, above] {$\epsilon_3$};
	\end{tikzpicture}
	\caption{3. test szabadtest-ábrája}
}

\newcommand{\structure}{
        \begin{figure}[hbt!]
                \centering
                \begin{tikzpicture}
                        \coords
			\convention

			\wheels
			\beams
                        \points
                \end{tikzpicture}
                \caption{Méretarányos szerkezet}
        \end{figure}
}

\newcommand{\speedpolepoint}{\fill[cyan] (P2) circle (\coordsize * 1.5) node[above, color=black] {$P_2$};}
\newcommand{\accelerationpolepoint}{\fill[cyan] (C) circle (\coordsize * 1.5) node[above, color=black] {$G_2$};}

\newcommand{\speeds}{
	\draw[line width=\speedwidth, \speedcolor, -Stealth]
	(C) -- ($(C) + (\vcx * \smul, 0)$)
	node[midway, above] {$\pmb{v}_\text{C}$};

	\coordinate (vBend) at ($(B) + (\vbx * \smul, \vby * \smul)$);
	\draw[line width=\speedwidth, \speedcolor, -Stealth]
	(B) -- (vBend)
	node[midway, above right] {$\pmb{v}_\text{B}$};

	\coordinate (vS2end) at ($(S2) + (\vstwox * \smul, \vstwoy * \smul)$);
	\draw[line width=\speedwidth, \speedcolor, -Stealth]
	(S2) -- (vS2end)
	node[above] {$\pmb{v}_{S_2}$};
}

\newcommand{\accelerations}{
	\draw[line width=\accelwidth, \accelcolor, -Stealth]
	(B) -- (aBend)
	node[midway, right] {$\pmb{a}_\text{B}$};

	\draw[line width=\accelwidth, \accelcolor, -Stealth]
	(S2) -- (aS2end)
	node[midway, left] {$\pmb{a}_{S_2}$};
}

\newcommand{\tancolor}{blue}
\newcommand{\normcolor}{orange}
\newcommand{\tangentials}{
	\draw[line width=\speedwidth, \tancolor, -Stealth]
	(S2) -- ($(S2) + (\astwotx * \amul * 100, \astwoty * \amul * 100)$)
	node[above] {$\pmb{a}_{{S_2}_t}$};

	\draw[line width=\speedwidth, \normcolor, -Stealth]
	(S2) -- ($(S2) + (\astwonx * \amul, \astwony * \amul)$)
	node[below] {$\pmb{a}_{{S_2}_n}$};
}

\newcommand{\accelangleecc}{.6}
\newcommand{\accelanglerad}{20}
\newcommand{\accelangles}{
	\path
	    pic["$\alpha_2$", draw=black, angle eccentricity=\accelangleecc, angle radius=\accelanglerad]
	    {angle = aBend--B--vBend};

	\path
	    pic["$\alpha_2$", draw=black, angle eccentricity=\accelangleecc, angle radius=\accelanglerad]
	    {angle = aS2end--S2--vS2end};
}

\newcommand{\structurespeedpole}{
        \begin{figure}[hbt!]
                \centering
                \begin{tikzpicture}
                        \coords
			
			\convention
			\wheels
			\beams

			\speeds

                        \points
			\speedpolepoint
                \end{tikzpicture}
                \caption{Méretarányos szerkezet sebességpólussal és sebességekkel}
        \end{figure}
}

\newcommand{\structureacceleration}{
        \begin{figure}[hbt!]
                \centering
                \begin{tikzpicture}
                        \coords
			
			\convention
			\wheels
			\beams

			\accelerations

                        \points
                \end{tikzpicture}
                \caption{Méretarányos szerkezet gyorsulásokkal}
        \end{figure}
}

\newcommand{\structureaccelerationpole}{
        \begin{figure}[hbt!]
                \centering
                \begin{tikzpicture}
                        \coords
			
			\convention
			\wheels
			\beams
			
			\speeds
			\accelerations
			\accelangles

                        \points
			\accelerationpolepoint
                \end{tikzpicture}
                \caption{Méretarányos szerkezet gyorsuláspólussal, gyorsulásokkal és azok gyorsulásszögével}
        \end{figure}
}

\newcommand{\structuretangential}{
        \begin{figure}[hbt!]
                \centering
                \begin{tikzpicture}
                        \coords
			
			\convention
			\wheels
			\beams

			\tangentials

                        \points
                \end{tikzpicture}
                \caption{Méretarányos szerkezet a gyorsulás tangenciális (százszoros nagyítással a szemléltetés céljából) és normális komponensével}
        \end{figure}
}
